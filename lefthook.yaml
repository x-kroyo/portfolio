pre-commit:
  parallel: true
  jobs:
    - name: Lint staged
      run: pnpm lint --fix {staged_files}
      stage_fixed: true
    - name: Test staged
      run: pnpm test {staged_files}
      glob: "test/**/*.spec.ts"

pre-push:
  parallel: true
  jobs:
    - name: Build
      run: pnpm build
    - name: Test
      run: pnpm test

post-merge:
  jobs:
    - name: Install lefthook hooks
      skip:
        - run: pnpm lefthook check-install
      run: pnpm lefthook install

    - name: Update dependencies
      run: pnpm i --frozen-lockfile --reporter=silent

post-checkout:
  jobs:
    - name: Update dependencies
      run: pnpm i --frozen-lockfile --reporter=silent


commit-msg:
  jobs:
    - name: Lint commit message
      run: pnpm commit-message-check {1}